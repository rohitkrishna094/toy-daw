(this["webpackJsonptoy-daw"]=this["webpackJsonptoy-daw"]||[]).push([[0],{108:function(e,t,c){},120:function(e,t,c){"use strict";c.r(t);var n=c(3),o=c.n(n),r=c(40),a=c.n(r),i=(c(86),c(134)),s=(c(87),c(6)),u=c(130),l=c(133),j=c(135),b=c(19),d=(c(97),c(32)),O=c.n(d),f=(c(108),c(5)),m=c(11),p=function(e){e.id;var t=e.min,c=void 0===t?-60:t,o=e.max,r=void 0===o?5.6:o,a=e.value,i=void 0===a?0:a,s=e.mode,l=void 0===s?"relative":s,j=e.interaction,b=void 0===j?"radial":j,d=e.size,p=void 0===d?[75,75]:d,v=e.onChange,x=e.uiProps,h=Object(n.useRef)();return Object(n.useEffect)((function(){var e=h.current.id,t=new O.a.Dial(e,{size:p,interaction:b,mode:l,min:c,max:r,value:i});return t.on("change",v),function(){t.destroy()}}),[h]),Object(m.jsx)(u.a,Object(f.a)({ref:h},x))},v=function(e){var t=e.uiProps,c=e.destination,o=Object(n.useRef)();return Object(n.useEffect)((function(){var e=o.current,t=new O.a.Oscilloscope(e);return t.connect(c),function(){t.destroy()}}),[o]),Object(m.jsx)(u.a,Object(f.a)({ref:o},t))},x=c(73),h=c.n(x),g=120,w=60,S=240,y=1,E=4,A=16,k=0,D=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),c=t[0],o=t[1],r=Object(n.useState)(),a=Object(s.a)(r,2),i=a[0],d=a[1],f=Object(n.useState)(),x=Object(s.a)(f,2),D=x[0],R=x[1],C=Object(n.useRef)(),P=Object(n.useState)(!1),B=Object(s.a)(P,2),z=B[0],M=B[1],q=Object(n.useState)(g),N=Object(s.a)(q,2),F=N[0],J=N[1],I=Object(n.useState)(E),T=Object(s.a)(I,2),U=T[0],V=(T[1],Object(n.useState)(A)),Y=Object(s.a)(V,2),Z=Y[0],G=(Y[1],Object(n.useState)(k)),H=Object(s.a)(G,2),K=H[0],L=(H[1],Object(n.useState)(0)),Q=Object(s.a)(L,2),W=Q[0],X=Q[1],$=Object(n.useState)(),_=Object(s.a)($,2),ee=_[0],te=_[1],ce=Object(n.useRef)();Object(n.useEffect)((function(){var e=new b.d(W).toDestination();te(e);var t=new b.b({urls:{0:"kick.mp3",1:"hihat.mp3",2:"snare.mp3",3:"tom1.mp3"},baseUrl:"https://tonejs.github.io/audio/drum-samples/acoustic-kit/"}).connect(e);return d(t),function(){d(void 0)}}),[]),Object(n.useEffect)((function(){ee&&(ee.volume.value=W)}),[W,ee]),Object(n.useEffect)((function(){var e,t=null===ce||void 0===ce||null===(e=ce.current)||void 0===e?void 0:e.id,c=new O.a.Sequencer(t,{size:[500,160],mode:"toggle",rows:U,columns:Z,paddingRow:5,paddingColumn:5});c.colorize("fill","#51575B"),c.colorize("accent","#AABAC4");for(var n=ce.current.getElementsByTagName("rect"),o=0;o<n.length;o++){var r=n[o];Math.floor(o/4);r.setAttribute("rx",4)}return c.matrix.set.all([[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),R(c),function(){c.destroy(),R(void 0)}}),[ce]);var ne=function(e){b.c.bpm.value=F,b.c.scheduleRepeat((function(t){e.next(),C.current.play(b.e().rawContext,(function(e){console.log(e)})),e.matrix.pattern.forEach((function(e,c){var n=i.player(c);e[K]&&n.start(t,0,"1n")})),K=(K+1)%Z}),"16n")};return Object(m.jsx)(h.a,{bounds:"parent",children:Object(m.jsxs)(u.a,{className:"step-sequencer-container",children:[Object(m.jsx)("webaudio-pianoroll",{ref:C,editMode:"dragpoly",style:{overflowY:"scroll"},xRange:256,yRange:20,width:"1000",xScroll:1,yScroll:1,wheelZoom:1,markStart:0,markEnd:256,collt:"#34444E",coldk:"#2E3E48",colgrid:"#24343E",colnote:"#A4D4AD",colnotesel:"#AFD4BA",colnoteborder:"#A4D4AD",colrulerbg:"#1F2A32",colrulerfg:"#b0b0b0",kbwidth:"80"}),Object(m.jsxs)(u.a,{flexDir:"column",mt:5,children:[Object(m.jsxs)("h3",{children:[F," BPM"]}),Object(m.jsxs)(l.a,{w:"500px",defaultValue:g,min:w,max:S,step:y,onChange:function(e){b.c.bpm.value=e,J(e)},children:[Object(m.jsx)(l.d,{children:Object(m.jsx)(l.b,{})}),Object(m.jsx)(l.c,{})]}),Object(m.jsx)(v,{uiProps:{id:"oscilloscope"},destination:b.a}),Object(m.jsx)(j.a,{colorScheme:"blue",onClick:function(e){z||(b.f(),M(!0),ne(D)),c?(b.c.stop(),C.current.stop()):b.c.start(),o(!c)},pl:100,pr:100,children:c?"Pause":"Play"}),Object(m.jsx)(p,{onChange:function(e){return X(e)},uiProps:{id:"volume",mt:5}}),Object(m.jsx)(u.a,{id:"sequencer",mt:5,ref:ce})]})]})})};var R=function(){return Object(m.jsx)(i.a,{children:Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(D,{})})})};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(R,{})}),document.getElementById("root"))},86:function(e,t,c){},87:function(e,t,c){}},[[120,1,2]]]);
//# sourceMappingURL=main.d7b511db.chunk.js.map