(this["webpackJsonptoy-daw"]=this["webpackJsonptoy-daw"]||[]).push([[0],{101:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var n=c(3),o=c.n(n),a=c(65),r=c.n(a),s=(c(79),c(121)),i=(c(80),c(5)),u=c(117),l=c(120),j=c(122),b=c(18),d=(c(90),c(48)),O=c.n(d),f=(c(101),c(13)),m=120,p=60,v=240,x=1,h=4,g=16,w=0,S=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),c=t[0],o=t[1],a=Object(n.useState)(),r=Object(i.a)(a,2),s=r[0],d=r[1],S=Object(n.useState)(),y=Object(i.a)(S,2),E=y[0],A=y[1],k=Object(n.useState)(),D=Object(i.a)(k,2),R=(D[0],D[1]),B=Object(n.useState)(),C=Object(i.a)(B,2),z=C[0],M=C[1],q=Object(n.useRef)(),N=Object(n.useState)(!1),P=Object(i.a)(N,2),F=P[0],J=P[1],I=Object(n.useState)(m),T=Object(i.a)(I,2),U=T[0],V=T[1],Y=Object(n.useState)(h),Z=Object(i.a)(Y,2),G=Z[0],H=(Z[1],Object(n.useState)(g)),K=Object(i.a)(H,2),L=K[0],Q=(K[1],Object(n.useState)(w)),W=Object(i.a)(Q,2),X=W[0],$=(W[1],Object(n.useState)(0)),_=Object(i.a)($,2),ee=_[0],te=_[1],ce=Object(n.useState)(),ne=Object(i.a)(ce,2),oe=ne[0],ae=ne[1],re=Object(n.useRef)(),se=Object(n.useRef)(),ie=Object(n.useRef)();Object(n.useEffect)((function(){var e=new b.d(ee).toDestination();ae(e);var t=new b.b({urls:{0:"kick.mp3",1:"hihat.mp3",2:"snare.mp3",3:"tom1.mp3"},baseUrl:"https://tonejs.github.io/audio/drum-samples/acoustic-kit/"}).connect(e);return d(t),function(){d(void 0)}}),[]),Object(n.useEffect)((function(){oe&&(oe.volume.value=ee)}),[ee,oe]),Object(n.useEffect)((function(){var e,t=null===re||void 0===re||null===(e=re.current)||void 0===e?void 0:e.id,c=new O.a.Sequencer(t,{size:[500,160],mode:"toggle",rows:G,columns:L,paddingRow:5,paddingColumn:5});c.colorize("fill","#51575B"),c.colorize("accent","#AABAC4");for(var n=re.current.getElementsByTagName("rect"),o=0;o<n.length;o++){var a=n[o];Math.floor(o/4);a.setAttribute("rx",4)}return c.matrix.set.all([[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),A(c),function(){c.destroy(),A(void 0)}}),[re]),Object(n.useEffect)((function(){var e=ie.current,t=new O.a.Oscilloscope(e);return t.connect(b.a),R(t),function(){t.destroy(),R(void 0)}}),[ie]),Object(n.useEffect)((function(){var e=se.current.id;return new O.a.Dial(e,{size:[75,75],interaction:"radial",mode:"relative",min:-60,max:5.6,value:0}).on("change",(function(e){te(e)})),function(){M(void 0),z.destroy()}}),[se]);var ue=function(e){b.c.bpm.value=U,b.c.scheduleRepeat((function(t){e.next(),q.current.play(b.e().rawContext,(function(e){console.log(e)})),e.matrix.pattern.forEach((function(e,c){var n=s.player(c);e[X]&&n.start(t,0,"1n")})),X=(X+1)%L}),"16n")};return Object(f.jsxs)("div",{className:"step-sequencer-container",children:[Object(f.jsx)("webaudio-pianoroll",{ref:q,editMode:"dragpoly",style:{overflowY:"scroll"},xRange:256,yRange:20,width:"1000",xScroll:1,yScroll:1,wheelZoom:1,markStart:0,markEnd:256,collt:"#34444E",coldk:"#2E3E48",colgrid:"#24343E",colnote:"#A4D4AD",colnotesel:"#AFD4BA",colnoteborder:"#A4D4AD",colrulerbg:"#1F2A32",colrulerfg:"#b0b0b0",kbwidth:"80"}),Object(f.jsxs)(u.a,{flexDir:"column",mt:5,children:[Object(f.jsxs)("h3",{children:[U," BPM"]}),Object(f.jsxs)(l.a,{w:"500px",defaultValue:m,min:p,max:v,step:x,onChange:function(e){b.c.bpm.value=e,V(e)},children:[Object(f.jsx)(l.d,{children:Object(f.jsx)(l.b,{})}),Object(f.jsx)(l.c,{})]}),Object(f.jsx)(u.a,{id:"oscilloscope",ref:ie}),Object(f.jsx)(j.a,{colorScheme:"blue",onClick:function(e){F||(b.f(),J(!0),ue(E)),c?(b.c.stop(),q.current.stop()):b.c.start(),o(!c)},pl:100,pr:100,children:c?"Pause":"Play"}),Object(f.jsx)(u.a,{id:"volumne",mt:5,ref:se}),Object(f.jsx)(u.a,{id:"sequencer",mt:5,ref:re})]})]})};var y=function(){return Object(f.jsx)(s.a,{children:Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(S,{})})})};r.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root"))},79:function(e,t,c){},80:function(e,t,c){}},[[107,1,2]]]);
//# sourceMappingURL=main.b08a2af0.chunk.js.map