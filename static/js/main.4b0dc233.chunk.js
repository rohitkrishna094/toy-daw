(this["webpackJsonptoy-daw"]=this["webpackJsonptoy-daw"]||[]).push([[0],{120:function(e,t,c){"use strict";c.r(t);var n=c(3),o=c.n(n),r=c(41),a=c.n(r),i=(c(86),c(134)),s=(c(87),c(6)),u=c(130),l=c(133),j=c(135),b=c(19),d=c(32),f=c.n(d),O=(c(97),c(5)),p=c(11),m=function(e){var t=e.min,c=void 0===t?-60:t,o=e.max,r=void 0===o?5.6:o,a=e.value,i=void 0===a?0:a,s=e.mode,l=void 0===s?"relative":s,j=e.interaction,b=void 0===j?"radial":j,d=e.size,m=void 0===d?[75,75]:d,v=e.onChange,x=e.uiProps,h=Object(n.useRef)();return Object(n.useEffect)((function(){var e=h.current.id,t=new f.a.Dial(e,{size:m,interaction:b,mode:l,min:c,max:r,value:i});return t.on("change",v),function(){t.destroy()}}),[h]),Object(p.jsx)(u.a,Object(O.a)({ref:h},x))},v=function(e){var t=e.uiProps,c=e.destination,o=Object(n.useRef)();return Object(n.useEffect)((function(){var e=o.current,t=new f.a.Oscilloscope(e);return t.connect(c),function(){t.destroy()}}),[o]),Object(p.jsx)(u.a,Object(O.a)({ref:o},t))},x=c(73),h=c.n(x),g=(c(109),function(e){var t=e.pianoRollRef;return Object(p.jsx)(u.a,{children:Object(p.jsx)("webaudio-pianoroll",{ref:t,editMode:"dragpoly",style:{overflowY:"scroll"},xRange:256,yRange:20,width:"1000",xScroll:1,yScroll:1,wheelZoom:1,markStart:0,markEnd:256,collt:"#34444E",coldk:"#2E3E48",colgrid:"#24343E",colnote:"#A4D4AD",colnotesel:"#AFD4BA",colnoteborder:"#A4D4AD",colrulerbg:"#1F2A32",colrulerfg:"#b0b0b0",kbwidth:"80"})})}),w=120,S=60,y=240,R=1,E=4,A=16,k=0,D=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),c=t[0],o=t[1],r=Object(n.useState)(),a=Object(s.a)(r,2),i=a[0],d=a[1],O=Object(n.useState)(),x=Object(s.a)(O,2),D=x[0],C=x[1],P=Object(n.useRef)(),B=Object(n.useState)(!1),z=Object(s.a)(B,2),M=z[0],q=z[1],N=Object(n.useState)(w),F=Object(s.a)(N,2),J=F[0],I=F[1],T=Object(n.useState)(E),U=Object(s.a)(T,2),V=U[0],Y=(U[1],Object(n.useState)(A)),Z=Object(s.a)(Y,2),G=Z[0],H=(Z[1],Object(n.useState)(k)),K=Object(s.a)(H,2),L=K[0],Q=(K[1],Object(n.useState)(-20)),W=Object(s.a)(Q,2),X=W[0],$=W[1],_=Object(n.useState)(),ee=Object(s.a)(_,2),te=ee[0],ce=ee[1],ne=Object(n.useRef)(),oe=Object(n.useRef)();Object(n.useEffect)((function(){var e=new b.d(X).toDestination();ce(e);var t=new b.b({urls:{0:"kick.mp3",1:"hihat.mp3",2:"snare.mp3",3:"tom1.mp3"},baseUrl:"https://tonejs.github.io/audio/drum-samples/acoustic-kit/"}).connect(e);return d(t),function(){d(void 0)}}),[]),Object(n.useEffect)((function(){te&&(te.volume.value=X)}),[X,te]),Object(n.useEffect)((function(){var e,t=null===ne||void 0===ne||null===(e=ne.current)||void 0===e?void 0:e.id,c=new f.a.Sequencer(t,{size:[500,160],mode:"toggle",rows:V,columns:G,paddingRow:5,paddingColumn:5});c.colorize("fill","#51575B"),c.colorize("accent","#AABAC4");for(var n=ne.current.getElementsByTagName("rect"),o=0;o<n.length;o++){var r=n[o];Math.floor(o/4);r.setAttribute("rx",4)}return c.matrix.set.all([[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),C(c),function(){c.destroy(),C(void 0)}}),[ne]);var re=function(e){b.c.bpm.value=J,b.c.scheduleRepeat((function(t){e.next(),P.current.play(b.e().rawContext,(function(e){console.log(e)})),e.matrix.pattern.forEach((function(e,c){var n=i.player(c);e[L]&&n.start(t,0,"1n")})),L=(L+1)%G}),"16n")};return Object(p.jsx)(h.a,{bounds:"parent",nodeRef:oe,children:Object(p.jsxs)(u.a,{className:"step-sequencer-container",ref:oe,children:[Object(p.jsx)(g,{pianoRollRef:P}),Object(p.jsxs)(u.a,{flexDir:"column",mt:5,children:[Object(p.jsxs)("h3",{children:[J," BPM"]}),Object(p.jsxs)(l.a,{w:"500px",defaultValue:w,min:S,max:y,step:R,onChange:function(e){b.c.bpm.value=e,I(e)},children:[Object(p.jsx)(l.d,{children:Object(p.jsx)(l.b,{})}),Object(p.jsx)(l.c,{})]}),Object(p.jsx)(v,{uiProps:{id:"oscilloscope"},destination:b.a}),Object(p.jsx)(j.a,{colorScheme:"blue",onClick:function(e){M||(b.f(),q(!0),re(D)),c?(b.c.stop(),P.current.stop()):b.c.start(),o(!c)},pl:100,pr:100,children:c?"Pause":"Play"}),Object(p.jsx)(m,{value:X,onChange:function(e){return $(e)},uiProps:{id:"volume",mt:5}}),Object(p.jsx)(u.a,{id:"sequencer",mt:5,ref:ne})]})]})})};var C=function(){return Object(p.jsx)(i.a,{children:Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(D,{})})})};a.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(C,{})}),document.getElementById("root"))},86:function(e,t,c){},87:function(e,t,c){},97:function(e,t,c){}},[[120,1,2]]]);
//# sourceMappingURL=main.4b0dc233.chunk.js.map