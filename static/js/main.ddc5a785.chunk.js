(this["webpackJsonptoy-daw"]=this["webpackJsonptoy-daw"]||[]).push([[0],{102:function(e,t,c){},108:function(e,t,c){"use strict";c.r(t);var n=c(3),o=c.n(n),r=c(67),a=c.n(r),i=(c(80),c(122)),s=(c(81),c(6)),u=c(118),l=c(121),j=c(123),b=c(19),d=(c(91),c(32)),f=c.n(d),O=(c(102),c(5)),m=c(13),p=function(e){e.id;var t=e.min,c=void 0===t?-60:t,o=e.max,r=void 0===o?5.6:o,a=e.value,i=void 0===a?0:a,s=e.mode,l=void 0===s?"relative":s,j=e.interaction,b=void 0===j?"radial":j,d=e.size,p=void 0===d?[75,75]:d,v=e.onChange,x=e.uiProps,h=Object(n.useRef)();return Object(n.useEffect)((function(){var e=h.current.id,t=new f.a.Dial(e,{size:p,interaction:b,mode:l,min:c,max:r,value:i});return t.on("change",v),function(){t.destroy()}}),[h]),Object(m.jsx)(u.a,Object(O.a)({ref:h},x))},v=function(e){var t=e.uiProps,c=e.destination,o=Object(n.useRef)();return Object(n.useEffect)((function(){var e=o.current,t=new f.a.Oscilloscope(e);return t.connect(c),function(){t.destroy()}}),[o]),Object(m.jsx)(u.a,Object(O.a)({ref:o},t))},x=120,h=60,g=240,w=1,S=4,y=16,E=0,A=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),c=t[0],o=t[1],r=Object(n.useState)(),a=Object(s.a)(r,2),i=a[0],d=a[1],O=Object(n.useState)(),A=Object(s.a)(O,2),k=A[0],D=A[1],R=Object(n.useRef)(),C=Object(n.useState)(!1),P=Object(s.a)(C,2),B=P[0],z=P[1],M=Object(n.useState)(x),q=Object(s.a)(M,2),N=q[0],F=q[1],J=Object(n.useState)(S),I=Object(s.a)(J,2),T=I[0],U=(I[1],Object(n.useState)(y)),V=Object(s.a)(U,2),Y=V[0],Z=(V[1],Object(n.useState)(E)),G=Object(s.a)(Z,2),H=G[0],K=(G[1],Object(n.useState)(0)),L=Object(s.a)(K,2),Q=L[0],W=L[1],X=Object(n.useState)(),$=Object(s.a)(X,2),_=$[0],ee=$[1],te=Object(n.useRef)();Object(n.useEffect)((function(){var e=new b.d(Q).toDestination();ee(e);var t=new b.b({urls:{0:"kick.mp3",1:"hihat.mp3",2:"snare.mp3",3:"tom1.mp3"},baseUrl:"https://tonejs.github.io/audio/drum-samples/acoustic-kit/"}).connect(e);return d(t),function(){d(void 0)}}),[]),Object(n.useEffect)((function(){_&&(_.volume.value=Q)}),[Q,_]),Object(n.useEffect)((function(){var e,t=null===te||void 0===te||null===(e=te.current)||void 0===e?void 0:e.id,c=new f.a.Sequencer(t,{size:[500,160],mode:"toggle",rows:T,columns:Y,paddingRow:5,paddingColumn:5});c.colorize("fill","#51575B"),c.colorize("accent","#AABAC4");for(var n=te.current.getElementsByTagName("rect"),o=0;o<n.length;o++){var r=n[o];Math.floor(o/4);r.setAttribute("rx",4)}return c.matrix.set.all([[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0],[0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]),D(c),function(){c.destroy(),D(void 0)}}),[te]);var ce=function(e){b.c.bpm.value=N,b.c.scheduleRepeat((function(t){e.next(),R.current.play(b.e().rawContext,(function(e){console.log(e)})),e.matrix.pattern.forEach((function(e,c){var n=i.player(c);e[H]&&n.start(t,0,"1n")})),H=(H+1)%Y}),"16n")};return Object(m.jsxs)("div",{className:"step-sequencer-container",children:[Object(m.jsx)("webaudio-pianoroll",{ref:R,editMode:"dragpoly",style:{overflowY:"scroll"},xRange:256,yRange:20,width:"1000",xScroll:1,yScroll:1,wheelZoom:1,markStart:0,markEnd:256,collt:"#34444E",coldk:"#2E3E48",colgrid:"#24343E",colnote:"#A4D4AD",colnotesel:"#AFD4BA",colnoteborder:"#A4D4AD",colrulerbg:"#1F2A32",colrulerfg:"#b0b0b0",kbwidth:"80"}),Object(m.jsxs)(u.a,{flexDir:"column",mt:5,children:[Object(m.jsxs)("h3",{children:[N," BPM"]}),Object(m.jsxs)(l.a,{w:"500px",defaultValue:x,min:h,max:g,step:w,onChange:function(e){b.c.bpm.value=e,F(e)},children:[Object(m.jsx)(l.d,{children:Object(m.jsx)(l.b,{})}),Object(m.jsx)(l.c,{})]}),Object(m.jsx)(v,{uiProps:{id:"oscilloscope"},destination:b.a}),Object(m.jsx)(j.a,{colorScheme:"blue",onClick:function(e){B||(b.f(),z(!0),ce(k)),c?(b.c.stop(),R.current.stop()):b.c.start(),o(!c)},pl:100,pr:100,children:c?"Pause":"Play"}),Object(m.jsx)(p,{onChange:function(e){return W(e)},uiProps:{id:"volume",mt:5}}),Object(m.jsx)(u.a,{id:"sequencer",mt:5,ref:te})]})]})};var k=function(){return Object(m.jsx)(i.a,{children:Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(A,{})})})};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root"))},80:function(e,t,c){},81:function(e,t,c){}},[[108,1,2]]]);
//# sourceMappingURL=main.ddc5a785.chunk.js.map